stages:
 - shellcheck
 - test

shellcheck:
  stage: shellcheck
  tags:
    - linux
  script:
    - sudo apt-get install shellcheck
    - shellcheck install-uptime-kuma.sh

test_job:
  stage: test
  tags:
    - linux
  script:
    - sudo apt-get update
    - sudo rm -rf /var/lib/dpkg/lock-frontend /var/lib/dpkg/lock /var/cache/debconf/*.dat /var/cache/apt/archives/lock
    - sudo dpkg --configure -a
    - sudo apt-get install -f
    - sudo apt-get install -y python3-dev python3-pip
    - sh testscript.sh
  artifacts:
    paths:
      - coverage.xml
